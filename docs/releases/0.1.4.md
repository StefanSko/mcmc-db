# mcmc-ref v0.1.4

Release date: 2026-02-22

## Summary

Data completeness release fixing issue #14 â€” all 5 geometry pairs now have
packaged reference draws and metadata, enabling `pair(name).reference_draws`
and `pair(name).reference_stats` to work out of the box.

Also includes the unpublished v0.1.3 consolidation work (provenance pipeline
as canonical generation path, removed legacy import commands).

## Highlights

### Issue #14 fix: pair reference draws
- Generated and packaged CmdStan reference draws for all 5 geometry pairs:
  - `bangladesh_contraceptive-noncentered`
  - `eight_schools-noncentered`
  - `hierarchical_lr-noncentered`
  - `neals_funnel-noncentered`
  - `varying_slopes-noncentered`
- Added matching stan_models and stan_data for pair reference models.
- Added pair-reference invariant test ensuring every packaged pair has
  matching draws + meta files.
- Isolated bundled-pair tests to use packaged-only data (no local fallback).

### Stddev backend consistency
- Fixed NumPy backend to use population stddev (ddof=0), matching the
  Arrow backend and `compare.py`. Previously `np.std(ddof=1)`.
- Added cross-backend consistency test.

### Data package cleanup
- Removed accidentally committed CmdStan compiled binary from stan_models/.
- Added test enforcing stan_models/ contains only .stan source files.

### Generation pipeline improvements
- Fixed `varying_slopes-noncentered` Stan code: `z_group ~ normal(0, 1)`
  changed to `to_vector(z_group) ~ normal(0, 1)` (matrix not valid for
  normal distribution).
- `convert_file()` now accepts a `source` parameter; generation pipeline
  passes `cmdstan-{version}` instead of hardcoded `"converted"`.

### Included from v0.1.3 (unpublished)
- Provenance pipeline (`provenance-scaffold -> generate -> publish`) is now
  the canonical generation path.
- Generator metadata in provenance manifests (name, version, source_commit).
- Removed legacy import/conversion commands.
- Removed hardcoded `/tmp/jaxstanv3/` defaults from runtime tooling.

## Versioning

- `mcmc-ref`: `0.1.4`
- `mcmc-ref-data`: `0.1.4`

## Validation

    uv run ruff check .
    uv run ty check .
    uv run pytest

## Upgrade

    uv add "mcmc-ref[data]==0.1.4"
